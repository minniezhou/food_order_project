(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,,,function(e,t,n){e.exports={form:"Checkout_form__VyWCE",control:"Checkout_control__3FRA_",actions:"Checkout_actions__wrD2b",submit:"Checkout_submit__2HcwC",invalid:"Checkout_invalid__2xd6k"}},,,,function(e,t,n){e.exports={"cart-items":"Cart_cart-items__397rC",item:"Cart_item__2WCs1",total:"Cart_total__DdrQR",actions:"Cart_actions__2yrsi","button--alt":"Cart_button--alt__97s5v",button:"Cart_button__38uTY"}},function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__2QbFr",summary:"CartItem_summary__cxcpT",price:"CartItem_price__2zUY9",amount:"CartItem_amount__3eDip",actions:"CartItem_actions__1l5dC"}},,function(e,t,n){e.exports={button:"FoodCartButton_button__3zri2",icon:"FoodCartButton_icon__1iRML",badge:"FoodCartButton_badge__2u7Yi",bump:"FoodCartButton_bump__BiNK_"}},,,,,function(e,t,n){e.exports={meal:"MealItem_meal__3PbmC",description:"MealItem_description__15M6x",price:"MealItem_price__PZTrD"}},,,function(e,t,n){e.exports={header:"Header_header__aWrpI","main-image":"Header_main-image__2seyl"}},function(e,t,n){e.exports={form:"MealItemForm_form__3v_ik",input:"MealItemForm_input__2rsCm"}},function(e,t,n){e.exports={backdrop:"Modal_backdrop__3Zhce",modal:"Modal_modal__9Ha_O","slide-down":"Modal_slide-down__aGZdX"}},,,,function(e,t,n){e.exports={summary:"MealSummary_summary__2tDSq"}},function(e,t,n){e.exports={meals:"AvailableMeal_meals__kwk_C","meals-appear":"AvailableMeal_meals-appear__2USoz"}},function(e,t,n){e.exports={card:"Card_card__3LUon"}},,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var c=n(25),a=n.n(c),r=(n(40),n(4)),s=n(1),o=n.n(s),i=n(26),l=n.n(i),u=n(0),d=o.a.memo((function(){return Object(u.jsxs)("section",{className:l.a.summary,children:[Object(u.jsx)("h2",{children:"Delicious Food, Delivered To You"}),Object(u.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(u.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})})),j=n.p+"static/media/meals.2971f633.jpg",m=n(20),b=n.n(m),O=n(12),x=n.n(O),h=n(32),p=o.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},emptyCart:function(){}}),f=function(e){var t=Object(s.useState)({items:[],amount:0}),n=Object(r.a)(t,2),c=n[0],a=n[1];return Object(u.jsx)(p.Provider,{value:{items:c.items,totalAmount:c.amount,addItem:function(e){a((function(t){var n=t.amount+e.amount,c=t.items.findIndex((function(t){return t.id===e.id}));if(-1===c)return{items:[].concat(Object(h.a)(t.items),[e]),amount:n};var a=t.items;return a[c].amount=a[c].amount+e.amount,{items:a,amount:n}}))},removeItem:function(e){a((function(t){var n=t.items.findIndex((function(t){return t.id===e}));if(-1!==n){var c=t.amount-1,a=t.items;return a[n].amount>1?a[n].amount--:a.splice(n,1),{items:a,amount:c}}}))},emptyCart:function(){a({items:[],amount:0})}},children:e.children})},_=function(e){var t=Object(s.useContext)(p),n=Object(s.useState)(!1),c=Object(r.a)(n,2),a=c[0],o=c[1];return Object(s.useEffect)((function(){t.totalAmount>0&&o(!0);var e=setTimeout((function(){console.log("setting time out"),o(!1)}),300);return function(){console.log("cleanup"),clearTimeout(e)}}),[t.totalAmount]),Object(u.jsxs)("button",{className:"".concat(x.a.button," + ").concat(a?x.a.bump:""),onClick:e.onClick,children:[Object(u.jsx)("span",{className:x.a.icon,children:Object(u.jsx)(C,{})}),Object(u.jsx)("span",{children:"Your Cart "}),Object(u.jsx)("span",{className:x.a.badge,children:t.totalAmount})]})},C=function(){return Object(u.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})},v=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("header",{className:b.a.header,children:[Object(u.jsx)("h2",{children:"ReactMeals"}),Object(u.jsx)(_,{onClick:e.onCartClick})]}),Object(u.jsx)("img",{src:j,alt:"react meal",className:b.a["main-image"]})]})},g=n(2),k=n(27),N=n.n(k),y=n(28),I=n.n(y),F=function(e){return Object(u.jsx)("div",{className:I.a.card,children:e.children})},S=n(24),w=n(29),M=function(){var e=Object(s.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(!1),o=Object(r.a)(a,2),i=o[0],l=o[1],u=Object(s.useCallback)(function(){var e=Object(w.a)(Object(S.a)().mark((function e(t,n){var a,r;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),c(null),e.next=5,fetch(t.url,Object(g.a)({},t));case 5:if((a=e.sent).ok){e.next=8;break}throw new Error("Connection went wrong!");case 8:return e.next=10,a.json();case 10:r=e.sent,n(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),c(e.t0.message);case 17:l(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[]);return{error:n,isLoading:i,httpRequest:u}},R=n(17),A=n.n(R),z=n(21),q=n.n(z),B=function(e){var t=Object(s.useRef)();return Object(u.jsxs)("form",{className:q.a.form,onSubmit:function(n){n.preventDefault();var c=+t.current.value;e.onSubmit(c)},children:[Object(u.jsxs)("div",{className:q.a.input,children:[Object(u.jsx)("label",{htmlFor:e.id,children:" Amount "}),Object(u.jsx)("input",{ref:t,id:e.id,type:"number",min:"1",max:"5",step:"1",defaultValue:1})]}),Object(u.jsx)("button",{children:"+ Add"})]})},T=function(e){var t=Object(s.useContext)(p);return Object(u.jsxs)("li",{className:A.a.meal,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:e.name}),Object(u.jsxs)("div",{className:A.a.description,children:[" ",e.description," "]}),Object(u.jsx)("div",{className:A.a.price,children:"$".concat(e.price.toFixed(2))})]}),Object(u.jsx)("div",{children:Object(u.jsx)(B,{onSubmit:function(n){t.addItem(Object(g.a)(Object(g.a)({},e),{},{amount:n}))}})})]},e.id)},D=(n(42),function(){return Object(u.jsx)("div",{className:"spinner-container",children:Object(u.jsx)("div",{className:"loading-spinner"})})}),E=function(){var e=M(),t=e.error,n=e.isLoading,c=e.httpRequest,a=Object(s.useState)([]),o=Object(r.a)(a,2),i=o[0],l=o[1];return Object(s.useEffect)((function(){c({url:"https://food-order-1b58a-default-rtdb.firebaseio.com/Meals.json"},(function(e){var t=[];for(var n in e)t.push(Object(g.a)({id:n},e[n]));l(t)}))}),[c,l]),Object(u.jsx)("section",{className:N.a.meals,children:Object(u.jsxs)(F,{children:[n&&Object(u.jsx)(D,{}),t&&Object(u.jsx)("p",{children:t}),!t&&!n&&i.length>0&&Object(u.jsx)("ul",{children:i.map((function(e){return Object(u.jsx)(T,Object(g.a)({},e),e.id)}))})]})})},L=n(9),H=n.n(L),P=n(22),Y=n.n(P),Z=n(13),W=n.n(Z),$=function(e){return Object(u.jsxs)(u.Fragment,{children:[W.a.createPortal(Object(u.jsx)("div",{className:Y.a.backdrop,onClick:e.onClick}),document.getElementById("overlays")),W.a.createPortal(Object(u.jsx)("div",{className:Y.a.modal,children:e.children}),document.getElementById("overlays"))]})},J=n(10),U=n.n(J),V=function(e){var t="$".concat(e.price.toFixed(2));return Object(u.jsxs)("li",{className:U.a["cart-item"],children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:e.name}),Object(u.jsxs)("div",{className:U.a.summary,children:[Object(u.jsx)("span",{className:U.a.price,children:t}),Object(u.jsxs)("span",{className:U.a.amount,children:["x ",e.amount]})]})]}),Object(u.jsxs)("div",{className:U.a.actions,children:[Object(u.jsx)("button",{onClick:function(){e.onRemove(e.id)},children:"\u2212"}),Object(u.jsx)("button",{onClick:function(){e.onAdd(Object(g.a)(Object(g.a)({},e),{},{amount:1}))},children:"+"})]})]})},K=n(5),Q=n.n(K),G=n(8),X=function(e){var t=Object(s.useContext)(p);return Object(u.jsx)(G.d,{initialValues:{name:"",address:"",zip:""},validate:function(e,t){var n={};return e.name?e.name.trim().length<2&&(n.name="Name too short"):n.name="Required",e.address?e.address.trim().length<2&&(n.address="Address too short"):n.address="Required",e.zip?5!==e.zip.trim().length&&(n.zip="Invalid Zip"):n.zip="Required",n},onSubmit:function(n){e.httpRequest({url:"https://food-order-1b58a-default-rtdb.firebaseio.com/Orders.json",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userInfo:n,itemInfo:t.items})},(function(){e.setSubmitted(!0)}))},children:Object(u.jsxs)(G.c,{children:[Object(u.jsxs)("div",{className:Q.a.control,children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(u.jsx)(G.b,{name:"name",type:"text"}),Object(u.jsx)(G.a,{name:"name"})]}),Object(u.jsxs)("div",{className:Q.a.control,children:[Object(u.jsx)("label",{htmlFor:"address",children:"Address: "}),Object(u.jsx)(G.b,{name:"address",type:"text"}),Object(u.jsx)(G.a,{name:"address"})]}),Object(u.jsxs)("div",{className:Q.a.control,children:[Object(u.jsx)("label",{htmlFor:"zip",children:"Zip code: "}),Object(u.jsx)(G.b,{name:"zip",type:"text"}),Object(u.jsx)(G.a,{name:"zip"})]}),Object(u.jsxs)("div",{className:Q.a.actions,children:[Object(u.jsx)("button",{type:"submit",children:"Confirm"}),Object(u.jsx)("button",{onClick:e.onClose,children:"Cancel"})]})]})})},ee=function(e){var t=Object(s.useContext)(p),n=t.items.reduce((function(e,t){return e+t.price*t.amount}),0);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Your order is placed"}),Object(u.jsx)("p",{children:"Order number is : 1234567"}),Object(u.jsxs)("p",{children:[" total cost is $",n.toFixed(2)]}),Object(u.jsx)("button",{onClick:function(){e.onClose(),t.emptyCart()},children:"OK"})]})},te=function(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),c=n[0],a=n[1],o=Object(s.useContext)(p),i=o.items.reduce((function(e,t){return e+t.amount*t.price}),0),l=Object(s.useState)(!1),d=Object(r.a)(l,2),j=d[0],m=d[1],b=M(),O=b.error,x=b.isLoading,h=b.httpRequest;return Object(u.jsxs)($,{onClick:function(){e.onClose(),c&&o.emptyCart()},children:[x&&Object(u.jsx)(D,{}),O&&Object(u.jsx)("p",{children:"System Error!"}),c&&Object(u.jsx)(ee,{onClose:e.onClose}),!O&&!x&&!c&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:H.a["cart-items"],children:o.items.map((function(e){return Object(u.jsx)(V,Object(g.a)(Object(g.a)({},e),{},{onRemove:function(e){o.removeItem(e)},onAdd:function(e){o.addItem(Object(g.a)(Object(g.a)({},e),{},{amount:1}))}}))}))}),Object(u.jsxs)("div",{className:H.a.total,children:[Object(u.jsx)("span",{children:"Total: "}),Object(u.jsxs)("span",{children:["$",i.toFixed(2)]})]}),!j&&Object(u.jsxs)("div",{className:H.a.actions,children:[Object(u.jsx)("button",{className:H.a["button--alt"],onClick:e.onClose,children:"Close"}),o.items.length>0&&Object(u.jsx)("button",{className:H.a.button,onClick:function(){m(!0)},children:"Order"})]}),j&&Object(u.jsx)(X,{onClose:e.onClose,httpRequest:h,setSubmitted:a})]})]})},ne=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(!1),o=Object(r.a)(a,2),i=o[0],l=o[1];return Object(u.jsx)(f,{children:Object(u.jsxs)(u.Fragment,{children:[n&&Object(u.jsx)(te,{onClose:function(e){c(!1)}}),i&&Object(u.jsx)(ee,{onClose:function(){l(!1)}}),Object(u.jsx)(v,{onCartClick:function(e){c(!0)}}),Object(u.jsx)(d,{}),Object(u.jsx)(E,{})]})})};var ce=function(){return Object(u.jsx)("div",{children:Object(u.jsx)(ne,{})})};a.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(ce,{}))}],[[45,1,2]]]);
//# sourceMappingURL=main.e9541101.chunk.js.map